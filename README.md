# Pepe in Hong Kong: Data Analysis Pipeline ğŸ¸ğŸ‡­ğŸ‡°

This repository contains the complete data collection and analysis pipeline used for the academic paper:

**The Pepe the Frog Image-Meme in Hong Kong: Visual Recurrences and Gender Fluidity on the LIHKG Forum**
<br> *by Katrien Jacobs, Degel Cheung, Vasileios Maltezos, and Cecilia Wong*
<br> Journal of Digital Social Research, Vol. 4, No. 4, 2022
<br> **DOI:** [10.33621/jdsr.v4i4.131](https://doi.org/10.33621/jdsr.v4i4.131)

> [!WARNING]
> **Code Tested in 2022 â€” Functionality Not Guaranteed**
>
> This pipeline was fully functional for the research conducted prior to the paper's publication in 2022. The LIHKG website and its underlying API may have been updated since then. As a result, the scraping components are not guaranteed to work without modification.


The script automates the process of scraping, processing, analyzing, and archiving data from the LIHKG forum to study the use and adaptation of the Pepe the Frog meme during the 2019 Hong Kong Anti-Extradition Bill (anti-ELAB) movement.

## ğŸ”¬ The Research Context

This code is the practical implementation of the **computational big data analysis** methodology described in the research paper. The paper combines this quantitative approach with a qualitative analysis to understand how the Pepe meme was repurposed in Hong Kong to discuss politics, democracy, and gender.

The script was designed to:

* **Gather raw data** from the LIHKG forum, a central communication hub for the leaderless protest movement.
* **Quantify user engagement**, proving key insights mentioned in the paper, such as posts with images receiving **11.35 times higher** vote scores.
* **Extract and download all images and emojis** associated with relevant posts, creating the dataset necessary for the qualitative visual analysis of Pepe's representations.
* **Analyze content features**, such as the frequency of images, emojis, and links, to understand communication patterns on the forum.

The data generated by this pipeline directly supports the paper's conclusions about Pepe's gender fluidity, its role as a "cultural outsider," and its use in expressing complex emotions like sadness and anger during the movement.

## âœ¨ Key Features

* **ğŸ•µï¸ LIHKG Scraper:** Fetches thread data from the LIHKG forum for a given search term.
* **ğŸ§¹ Data Preprocessor:** Filters threads by keywords, calculates popularity and engagement metrics, and identifies relevant discussions for analysis.
* **ğŸ“Š Content Analyzer:** Extracts features from posts, including image URLs, emojis, and links. Performs statistical analysis and generates correlation reports.
* **ğŸ–¼ï¸ Image Downloader:** Downloads all images found in posts into a structured, nested directory (`thread_id/post_id/image.jpg`).
* **ğŸ—‚ï¸ Directory Flattener:** Copies all downloaded images into a single "flat" folder for easy viewing and further analysis.
* **ğŸ“ˆ Automated Reporting:** Generates CSV/Excel reports and plots to visualize thread statistics and analysis results.


## âš™ï¸ Pipeline Workflow

The script executes the following steps in sequence:

1. **Setup Directories:** Creates a structured folder system (`/data`, `/images`, `/reports`, `/plots`) to store all outputs.
2. **Scrape Threads:** Prompts the user for a search term and scrapes LIHKG for all related threads, saving the results to a CSV file.
3. **Preprocess \& Select:** Filters the scraped threads for relevance (e.g., containing "pepe," "frog") and isolates the most popular and engaged threads for deeper analysis.
4. **Analyze Data:**
    * Performs statistical analysis on the selected threads.
    * Consolidates all posts from "confirmed" relevant threads.
    * Analyzes post content to count images, emojis, and other features.
    * Generates reports and plots.
5. **Download Images:** Parses the analyzed post data and downloads every image URL into a nested directory structure.
6. **Flatten Image Directory:** Copies all images from the nested folders into a single, flat directory for easy access.

## ğŸ“‚ Directory Structure

Running the script will generate the following directory structure in your project folder:

```
.
â”œâ”€â”€ lihkg_pipeline.py
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ threads/
â”‚   â”œâ”€â”€ posts/
â”‚   â””â”€â”€ confirmed_threads_posts/
â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ lihkg_images_nested/
â”‚   â””â”€â”€ all_images_flat/
â”œâ”€â”€ reports/
â””â”€â”€ plots/
```


## ğŸ› ï¸ How to Use

### 1. Prerequisites

Ensure you have Python 3.8 or newer installed. Then, install the required libraries:

```bash
pip install pandas numpy requests cloudscraper matplotlib
```


### 2. Execution

Run the script from your terminal:

```bash
python lihkg_pipeline.py
```

The script will prompt you to enter a search term. Type your term (e.g., `pepe`) and press Enter. The pipeline will then run automatically.

## ğŸ™ Citation

If you use this code or the findings from the associated research, please cite the original paper:

Jacobs, K., Cheung, D., Maltezos, V., \& Wong, C. (2022). The Pepe the Frog Image-Meme in Hong Kong: Visual Recurrences and Gender Fluidity on the LIHKG Forum. *Journal of Digital Social Research*, *4*(4), 130â€“151. https://doi.org/10.33621/jdsr.v4i4.131

## ğŸ“œ License

This project is licensed under the MIT License.
